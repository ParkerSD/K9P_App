{"version":3,"sources":["logo.svg","handleClick.js","App.js","serviceWorker.js","index.js","puck.js"],"names":["module","exports","handleClick","App","makeStyles","theme","root","display","flexWrap","textField","marginLeft","spacing","marginRight","width","props","saveFileCallback","file","state","dataBuffer","puck","data","console","log","save","startHandler","write","stopHandler","a","className","Button","variant","color","size","onClick","this","style","position","right","left","Component","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message","factory","$","isBusy","connection","queue","NORDIC_SERVICE","debug","flowControl","level","s","writeProgress","charsSent","charsTotal","connect","eval","expr","cb","checkIfSupported","push","type","d","json","JSON","parse","e","stringify","toString","setTime","Date","cmd","getTime","getTimezoneOffset","isConnected","undefined","getConnection","close","modal","callback","createElement","innerHTML","onclick","evt","preventDefault","body","removeChild","appendChild","platform","indexOf","userAgent","warn","bluetooth","test","MSStream","handleQueue","length","q","shift","callbackNewline","btService","txCharacteristic","rxCharacteristic","on","emit","isOpen","isOpening","txInProgress","btServer","txDataQueue","flowControlXOFF","disconnect","maxLength","writeChunk","chunk","setTimeout","txItem","substr","writeValue","str","buf","ArrayBuffer","bufView","Uint8Array","i","strLen","charCodeAt","str2ab","requestDevice","filters","namePrefix","services","optionalServices","device","name","id","addEventListener","gatt","server","getPrimaryService","service","getCharacteristic","characteristic","event","dataview","target","value","buffer","String","fromCharCode","apply","ch","remove","concat","startNotifications","cbTimeout","received","onWritten","hadData","newLineIdx","l","clearTimeout","maxTime","dataWaitTime","maxDataTime","timeout","Puck"],"mappings":"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","file":"static/js/main.fb8adb2b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.ee7cd8ed.svg\";","\r\n\r\n\r\n    function handleClick(e) \r\n    {\r\n      e.preventDefault();\r\n      console.log('The button was clicked.');\r\n    }\r\n\r\n\r\n\r\nexport default handleClick;","import logo from './logo.svg';\r\nimport './App.css';\r\nimport Button from '@material-ui/core/Button';\r\nimport handleClick from './handleClick';\r\nimport {bleScan, callbackTx, callbackHeaderTx} from './ble';\r\nimport { styled } from '@material-ui/core/styles';\r\nimport Box from '@material-ui/core/Box';\r\nimport { borders } from '@material-ui/system';\r\nimport { compose, spacing, palette } from '@material-ui/system';\r\nimport React, { Component } from 'react';\r\nimport puck from './puck';\r\nimport Input from '@material-ui/core/Input';\r\nimport Select from '@material-ui/core/Select';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport { save } from 'save-file';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: '25ch',\r\n  },\r\n}));\r\n\r\n\r\n\r\nconst startByte = \"A\"; \r\nconst stopByte = \"B\";\r\n\r\n\r\n\r\n\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n \r\n    this.state = {\r\n      dataBuffer: null,\r\n    };\r\n}\r\n  \r\n\r\n  saveFileCallback = () => {\r\n\r\n    var file = this.state.dataBuffer;\r\n    file = puck.data;\r\n    console.log(file);\r\n    save(file, 'data.txt')\r\n    return; \r\n  }\r\n\r\n\r\n  startHandler = () => {\r\n    var header = startByte;\r\n    puck.write(header, null);\r\n  }\r\n  \r\n  stopHandler = async () => {\r\n\r\n    this.saveFileCallback();\r\n\r\n    var header = stopByte;\r\n    puck.write(header, null);\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div className=\"App\">\r\n        <header className=\"App-header\">\r\n          <h2>K9 Phys App</h2>\r\n\r\n          <p>\r\n            <Button variant=\"outlined\" color=\"primary\" size=\"large\" onClick={this.startHandler} \r\n              style={{\r\n                position: 'relative',\r\n                right: 10,\r\n              }}> \r\n              Start \r\n            </Button>\r\n        \r\n            <Button variant=\"outlined\" color=\"secondary\" size=\"large\" onClick={this.stopHandler}\r\n                style={{\r\n                position: 'relative',\r\n                left: 10,\r\n              }}> \r\n              Stop\r\n            </Button>\r\n\r\n          </p>\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","/*\r\n--------------------------------------------------------------------\r\nPuck.js BLE Interface library\r\n                      Copyright 2016 Gordon Williams (gw@pur3.co.uk)\r\n--------------------------------------------------------------------\r\nThis Source Code Form is subject to the terms of the Mozilla Public\r\nLicense, v. 2.0. If a copy of the MPL was not distributed with this\r\nfile, You can obtain one at http://mozilla.org/MPL/2.0/.\r\n--------------------------------------------------------------------\r\nThis creates a 'Puck' object that can be used from the Web Browser.\r\n\r\nSimple usage:\r\n\r\n  Puck.write(\"LED1.set()\\n\")\r\n\r\nExecute expression and return the result:\r\n\r\n  Puck.eval(\"BTN.read()\", function(d) {\r\n    alert(d);\r\n  });\r\n\r\nOr write and wait for a result - this will return all characters,\r\nincluding echo and linefeed from the REPL so you may want to send\r\n`echo(0)` and use `console.log` when doing this.\r\n\r\n  Puck.write(\"1+2\\n\", function(d) {\r\n    alert(d);\r\n  });\r\n\r\nOr more advanced usage with control of the connection\r\n - allows multiple connections\r\n\r\n  Puck.connect(function(connection) {\r\n    if (!connection) throw \"Error!\";\r\n    connection.on('data', function(d) { ... });\r\n    connection.on('close', function() { ... });\r\n    connection.write(\"1+2\\n\", function() {\r\n      connection.close();\r\n    });\r\n  });\r\n\r\n*/\r\n\r\n//UMD: Universal Module Definition\r\n(function (root, factory) {\r\n    //if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        //define([], factory);\r\n    //}\r\n    if (typeof module === 'object' && module.exports) {\r\n        // Node. Does not work with strict CommonJS, but\r\n        // only CommonJS-like environments that support module.exports,\r\n        // like Node.\r\n        module.exports = factory();\r\n    } \r\n    else {\r\n        // Browser globals (root is window)\r\n        root.Puck = factory();\r\n    }\r\n}(this, function ($) {\r\n//(typeof self !== 'undefined' ? self : this, function () {\r\n\r\n  if (typeof navigator == \"undefined\") return;\r\n\r\n  var isBusy;\r\n  var queue = [];\r\n\r\n  function checkIfSupported() {\r\n    // Hack for windows\r\n    if (navigator.platform.indexOf(\"Win\")>=0 &&\r\n        (navigator.userAgent.indexOf(\"Chrome/54\")>=0 ||\r\n         navigator.userAgent.indexOf(\"Chrome/55\")>=0 ||\r\n         navigator.userAgent.indexOf(\"Chrome/56\")>=0)\r\n        ) {\r\n      console.warn(\"Chrome <56 in Windows has navigator.bluetooth but it's not implemented properly\");\r\n      // if (confirm(\"Web Bluetooth on Windows is not yet available.\\nPlease click Ok to see other options for using Web Bluetooth\"))\r\n      //   window.location = \"https://www.espruino.com/Puck.js+Quick+Start\";\r\n      return false;\r\n    }\r\n    if (navigator.bluetooth) return true;\r\n    console.warn(\"No Web Bluetooth on this platform\");\r\n    var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n    if (iOS) {\r\n      console.warn(\"To use Web Bluetooth on iOS you'll need the WebBLE App\");\r\n      // if (confirm(\"To use Web Bluetooth on iOS you'll need the WebBLE App.\\nPlease click Ok to go to the App Store and download it.\"))\r\n      //   window.location = \"https://itunes.apple.com/us/app/webble/id1193531073\";\r\n    } else {\r\n      console.warn(\"This Web Browser doesn't support Web Bluetooth\");\r\n      // if (confirm(\"This Web Browser doesn't support Web Bluetooth.\\nPlease click Ok to see instructions for enabling it.\"))\r\n      //   window.location = \"https://www.espruino.com/Puck.js+Quick+Start\";\r\n    }\r\n    return false;\r\n  }\r\n\r\n  var NORDIC_SERVICE = \"6e400001-b5a3-f393-e0a9-e50e24dcca9e\";\r\n  var NORDIC_TX = \"6e400002-b5a3-f393-e0a9-e50e24dcca9e\";\r\n  var NORDIC_RX = \"6e400003-b5a3-f393-e0a9-e50e24dcca9e\";\r\n  var CHUNKSIZE = 244; //Max 512, but this value safely exceed max MTU of 247-3? \r\n\r\n  function log(level, s) {\r\n    if (puck.log) puck.log(level, s);\r\n  }\r\n\r\n  function ab2str(buf) {\r\n    return String.fromCharCode.apply(null, new Uint8Array(buf));\r\n  }\r\n\r\n  function str2ab(str) {\r\n    var buf = new ArrayBuffer(str.length);\r\n    var bufView = new Uint8Array(buf);\r\n    for (var i=0, strLen=str.length; i<strLen; i++) {\r\n      bufView[i] = str.charCodeAt(i);\r\n    }\r\n    return buf;\r\n  }\r\n\r\n  function handleQueue() {\r\n    if (!queue.length) return;\r\n    var q = queue.shift();\r\n    log(3,\"Executing \"+JSON.stringify(q)+\" from queue\");\r\n    if (q.type==\"eval\") puck.eval(q.expr, q.cb);\r\n    else if (q.type==\"write\") puck.write(q.data, q.callback, q.callbackNewline);\r\n    else log(1,\"Unknown queue item \"+JSON.stringify(q));\r\n  }\r\n\r\n  function connect(callback) {\r\n    if (!checkIfSupported()) return;\r\n\r\n    var connection = {\r\n      on : function(evt,cb) { this[\"on\"+evt]=cb; },\r\n      emit : function(evt,data) { if (this[\"on\"+evt]) this[\"on\"+evt](data); },\r\n      isOpen : false,\r\n      isOpening : true,\r\n      txInProgress : false\r\n    };\r\n    var btServer = undefined;\r\n    var btService;\r\n    var connectionDisconnectCallback;\r\n    var txCharacteristic;\r\n    var rxCharacteristic;\r\n    var txDataQueue = [];\r\n    var flowControlXOFF = false;\r\n\r\n    connection.close = function() {\r\n      connection.isOpening = false;\r\n      if (connection.isOpen) {\r\n        connection.isOpen = false;\r\n        connection.emit('close');\r\n      } else {\r\n        if (callback) callback(null);\r\n      }\r\n      if (btServer) {\r\n        btServer.disconnect();\r\n        btServer = undefined;\r\n        txCharacteristic = undefined;\r\n        rxCharacteristic = undefined;\r\n      }\r\n    };\r\n\r\n    connection.write = function(data, callback) {\r\n      if (data) txDataQueue.push({data:data,callback:callback,maxLength:data.length});\r\n      if (connection.isOpen && !connection.txInProgress) writeChunk();\r\n\r\n      function writeChunk() {\r\n        if (flowControlXOFF) { // flow control - try again later\r\n          setTimeout(writeChunk, 50);\r\n          return;\r\n        }\r\n        var chunk;\r\n        if (!txDataQueue.length) {\r\n          puck.writeProgress();\r\n          return;\r\n        }\r\n        var txItem = txDataQueue[0];\r\n        puck.writeProgress(txItem.maxLength - txItem.data.length, txItem.maxLength);\r\n        if (txItem.data.length <= CHUNKSIZE) {\r\n          chunk = txItem.data;\r\n          txItem.data = undefined;\r\n        } else {\r\n          chunk = txItem.data.substr(0,CHUNKSIZE);\r\n          txItem.data = txItem.data.substr(CHUNKSIZE);\r\n        }\r\n        connection.txInProgress = true;\r\n        console.log(2, \"Sending \"+ JSON.stringify(chunk));\r\n        txCharacteristic.writeValue(str2ab(chunk)).then(function() {\r\n          // console.log(3, \"Sent\"); \r\n          if (!txItem.data) {\r\n            txDataQueue.shift(); // remove this element\r\n            if (txItem.callback)\r\n              txItem.callback();\r\n          }\r\n          connection.txInProgress = false;\r\n          writeChunk();\r\n        }).catch(function(error) {\r\n         console.log(1, 'SEND ERROR: ' + error);\r\n         txDataQueue = [];\r\n         connection.close();\r\n        });\r\n      }\r\n    };\r\n\r\n    navigator.bluetooth.requestDevice({\r\n        filters:[\r\n          { namePrefix: 'K9P Reader' },\r\n          // { namePrefix: 'Pixl.js' },\r\n          // { namePrefix: 'MDBT42Q' },\r\n          // { namePrefix: 'RuuviTag' },\r\n          // { namePrefix: 'iTracker' },\r\n          // { namePrefix: 'Thingy' },\r\n          // { namePrefix: 'Espruino' },\r\n          { services: [ NORDIC_SERVICE ] }\r\n        ], optionalServices: [ NORDIC_SERVICE ]}).then(function(device) {\r\n      console.log(1, 'Device Name:       ' + device.name);\r\n      console.log(1, 'Device ID:         ' + device.id);\r\n      // Was deprecated: Should use getPrimaryServices for this in future\r\n      //log('BT>  Device UUIDs:      ' + device.uuids.join('\\n' + ' '.repeat(21)));\r\n      device.addEventListener('gattserverdisconnected', function() {\r\n        console.log(1, \"Disconnected (gattserverdisconnected)\");\r\n        connection.close();\r\n      });\r\n      return device.gatt.connect();\r\n    }).then(function(server) {\r\n      console.log(1, \"Connected\");\r\n      btServer = server;\r\n      return server.getPrimaryService(NORDIC_SERVICE);\r\n    }).then(function(service) {\r\n      console.log(2, \"Got service\");\r\n      btService = service;\r\n      return btService.getCharacteristic(NORDIC_RX);\r\n    }).then(function (characteristic) {\r\n      rxCharacteristic = characteristic;\r\n      console.log(2, \"RX characteristic:\"+JSON.stringify(rxCharacteristic));\r\n      rxCharacteristic.addEventListener('characteristicvaluechanged', function(event) {\r\n        var dataview = event.target.value;\r\n        var data = ab2str(dataview.buffer);\r\n        if (puck.flowControl) {\r\n          for (var i=0;i<data.length;i++) {\r\n            var ch = data.charCodeAt(i);\r\n            var remove = true;\r\n            if (ch==19) {// XOFF\r\n              console.log(2,\"XOFF received => pause upload\");\r\n              flowControlXOFF = true;\r\n            } else if (ch==17) {// XON\r\n              console.log(2,\"XON received => resume upload\");\r\n              flowControlXOFF = false;\r\n            } else\r\n              remove = false;\r\n            if (remove) { // remove character\r\n              data = data.substr(0,i-1)+data.substr(i+1);\r\n              i--;\r\n            }\r\n          }\r\n        }\r\n        console.log(3, \"Received \"+JSON.stringify(data));\r\n        connection.emit('data', data);\r\n\r\n        if(puck.data !== null){\r\n          puck.data = puck.data.concat(data); // follow on packets\r\n        }\r\n        else{\r\n          puck.data = data; //first data packet\r\n        }\r\n\r\n      });\r\n      return rxCharacteristic.startNotifications();\r\n    }).then(function() {\r\n      return btService.getCharacteristic(NORDIC_TX);\r\n    }).then(function (characteristic) {\r\n      txCharacteristic = characteristic;\r\n      console.log(2, \"TX characteristic:\"+JSON.stringify(txCharacteristic));\r\n    }).then(function() {\r\n      connection.txInProgress = false;\r\n      connection.isOpen = true;\r\n      connection.isOpening = false;\r\n      isBusy = false;\r\n      queue = [];\r\n      callback(connection);\r\n      connection.emit('open');\r\n      // if we had any writes queued, do them now\r\n      connection.write();\r\n    }).catch(function(error) {\r\n      console.log(1, 'ERROR: ' + error);\r\n      connection.close();\r\n    });\r\n    return connection;\r\n  };\r\n\r\n  // ----------------------------------------------------------\r\n  var connection;\r\n  /* convenience function... Write data, call the callback with data:\r\n       callbackNewline = false => if no new data received for ~0.2 sec\r\n       callbackNewline = true => after a newline */\r\n  function write(data, callback, callbackNewline) {\r\n    if (!checkIfSupported()) return;\r\n\r\n    if (isBusy) {\r\n      log(3, \"Busy - adding Puck.write to queue\");\r\n      queue.push({type:\"write\", data:data, callback:callback, callbackNewline:callbackNewline});\r\n      return;\r\n    }\r\n\r\n    var cbTimeout;\r\n    function onWritten() {\r\n      if (callbackNewline) {\r\n        connection.cb = function(d) {\r\n          var newLineIdx = connection.received.indexOf(\"\\n\");\r\n          if (newLineIdx>=0) {\r\n            var l = connection.received.substr(0,newLineIdx);\r\n            connection.received = connection.received.substr(newLineIdx+1);\r\n            connection.cb = undefined;\r\n            if (cbTimeout) clearTimeout(cbTimeout);\r\n            cbTimeout = undefined;\r\n            if (callback)\r\n              callback(l);\r\n            isBusy = false;\r\n            handleQueue();\r\n          }\r\n        };\r\n      }\r\n      // wait for any received data if we have a callback...\r\n      var maxTime = 300; // 30 sec - Max time we wait in total, even if getting data\r\n      var dataWaitTime = callbackNewline ? 100/*10 sec if waiting for newline*/ : 3/*300ms*/;\r\n      var maxDataTime = dataWaitTime; // max time we wait after having received data\r\n      cbTimeout = setTimeout(function timeout() {\r\n        cbTimeout = undefined;\r\n        if (maxTime) maxTime--;\r\n        if (maxDataTime) maxDataTime--;\r\n        if (connection.hadData) maxDataTime=dataWaitTime;\r\n        if (maxDataTime && maxTime) {\r\n          cbTimeout = setTimeout(timeout, 100);\r\n        } else {\r\n          connection.cb = undefined;\r\n          if (callback)\r\n            callback(connection.received);\r\n          isBusy = false;\r\n          handleQueue();\r\n          connection.received = \"\";\r\n        }\r\n        connection.hadData = false;\r\n      }, 100);\r\n    }\r\n\r\n    if (connection && (connection.isOpen || connection.isOpening)) {\r\n      if (!connection.txInProgress) connection.received = \"\";\r\n      isBusy = true;\r\n      return connection.write(data, onWritten);\r\n    }\r\n\r\n    connection = connect(function(puck) {\r\n      if (!puck) {\r\n        connection = undefined;\r\n        if (callback) callback(null);\r\n        return;\r\n      }\r\n      connection.received = \"\";\r\n      connection.on('data', function(d) {\r\n        connection.received += d;\r\n        connection.hadData = true;\r\n        if (connection.cb)  connection.cb(d);\r\n      });\r\n      connection.on('close', function(d) {\r\n        connection = undefined;\r\n      });\r\n      isBusy = true;\r\n      connection.write(data, onWritten);\r\n    });\r\n  }\r\n\r\n  // ----------------------------------------------------------\r\n\r\n  var puck = {\r\n    /// Are we writing debug information? 0 is no, 1 is some, 2 is more, 3 is all.\r\n    data : null,\r\n\r\n    debug : 1,\r\n    /// Should we use flow control? Default is true\r\n    flowControl : true,\r\n    /// Used internally to write log information - you can replace this with your own function\r\n    log : function(level, s) { if (level <= this.debug) console.log(\"<BLE> \"+s)},\r\n    /// Called with the current send progress or undefined when done - you can replace this with your own function\r\n    writeProgress : function (charsSent, charsTotal) {\r\n      //console.log(charsSent + \"/\" + charsTotal);\r\n    },\r\n    /** Connect to a new device - this creates a separate\r\n     connection to the one `write` and `eval` use. */\r\n    connect : connect,\r\n    /// Write to Puck.js and call back when the data is written.  Creates a connection if it doesn't exist\r\n    write : write,\r\n    /// Evaluate an expression and call cb with the result. Creates a connection if it doesn't exist\r\n    eval : function(expr, cb) {\r\n      if (!checkIfSupported()) return;\r\n      if (isBusy) {\r\n        log(3, \"Busy - adding Puck.eval to queue\");\r\n        queue.push({type:\"eval\", expr:expr, cb:cb});\r\n        return;\r\n      }\r\n      write('\\x10Bluetooth.println(JSON.stringify('+expr+'))\\n', function(d) {\r\n        try {\r\n          var json = JSON.parse(d);\r\n          cb(json);\r\n        } catch (e) {\r\n          log(1, \"Unable to decode \"+JSON.stringify(d)+\", got \"+e.toString());\r\n          cb(null, \"Unable to decode \"+JSON.stringify(d)+\", got \"+e.toString());\r\n        }\r\n      }, true);\r\n    },\r\n    /// Write the current time to the Puck\r\n    setTime : function(cb) {\r\n      var d = new Date();\r\n      var cmd = 'setTime('+(d.getTime()/1000)+');';\r\n      // in 1v93 we have timezones too\r\n      cmd += 'if (E.setTimeZone) E.setTimeZone('+d.getTimezoneOffset()/-60+');\\n';\r\n      write(cmd, cb);\r\n    },\r\n    /// Did `write` and `eval` manage to create a connection?\r\n    isConnected : function() {\r\n      return connection!==undefined;\r\n    },\r\n    /// get the connection used by `write` and `eval`\r\n    getConnection : function() {\r\n      return connection;\r\n    },\r\n    /// Close the connection used by `write` and `eval`\r\n    close : function() {\r\n      if (connection)\r\n        connection.close();\r\n    },\r\n\r\n    /** Utility function to fade out everything on the webpage and display\r\n    a window saying 'Click to continue'. When clicked it'll disappear and\r\n    'callback' will be called. This is useful because you can't initialise\r\n    Web Bluetooth unless you're doing so in response to a user input.*/\r\n    modal : function(callback) {\r\n      var e = document.createElement('div');\r\n      e.style = 'position:absolute;top:0px;left:0px;right:0px;bottom:0px;opacity:0.5;z-index:100;background:black;';\r\n      e.innerHTML = '<div style=\"position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-family: Sans-Serif;font-size:400%;color:white;\">Click to Continue...</div>';\r\n      e.onclick = function(evt) {\r\n        callback();\r\n        evt.preventDefault();\r\n        document.body.removeChild(e);\r\n      };\r\n      document.body.appendChild(e);\r\n    }\r\n  };\r\n  return puck;\r\n}));\r\n"],"sourceRoot":""}