(this.webpackJsonpk9p_app=this.webpackJsonpk9p_app||[]).push([[0],{29:function(e,t,n){e.exports=n(53)},34:function(e,t,n){},35:function(e,t,n){e.exports=n.p+"static/media/logo.ee7cd8ed.svg"},36:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),a=n(7),r=n.n(a),c=(n(34),n(20)),s=n(21),l=n(25),u=n(24),d=(n(35),n(36),n(77));n(14),n(17);var f=n(6),g=n.n(f);var v=n(75),h=n(22),p=(Object(v.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"25ch"}}})),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(c.a)(this,n),(o=t.call(this,e)).saveFileCallback=function(){var e=o.state.dataBuffer;e=g.a.data,console.log(e),Object(h.save)(e,"data.txt")},o.startHandler=function(){g.a.write("A",null)},o.stopHandler=function(){g.a.write("B",o.saveFileCallback)},o.state={dataBuffer:null},o}return Object(s.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("h2",null,"K9 Phys App"),i.a.createElement("p",null,i.a.createElement(d.a,{variant:"outlined",color:"primary",size:"large",onClick:this.startHandler,style:{position:"relative",right:10}},"Start"),i.a.createElement(d.a,{variant:"outlined",color:"secondary",size:"large",onClick:this.stopHandler,style:{position:"relative",left:10}},"Stop"))))}}]),n}(o.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,n){var o,i;o=this,i=function(e){if("undefined"!=typeof navigator){var t,n,o=[],i="6e400001-b5a3-f393-e0a9-e50e24dcca9e",a={data:null,debug:1,flowControl:!0,log:function(e,t){e<=this.debug&&console.log("<BLE> "+t)},writeProgress:function(e,t){},connect:l,write:u,eval:function(e,n){if(r())return t?(c(3,"Busy - adding Puck.eval to queue"),void o.push({type:"eval",expr:e,cb:n})):void u("\x10Bluetooth.println(JSON.stringify("+e+"))\n",(function(e){try{var t=JSON.parse(e);n(t)}catch(o){c(1,"Unable to decode "+JSON.stringify(e)+", got "+o.toString()),n(null,"Unable to decode "+JSON.stringify(e)+", got "+o.toString())}}),!0)},setTime:function(e){var t=new Date,n="setTime("+t.getTime()/1e3+");";u(n+="if (E.setTimeZone) E.setTimeZone("+t.getTimezoneOffset()/-60+");\n",e)},isConnected:function(){return void 0!==n},getConnection:function(){return n},close:function(){n&&n.close()},modal:function(e){var t=document.createElement("div");t.style="position:absolute;top:0px;left:0px;right:0px;bottom:0px;opacity:0.5;z-index:100;background:black;",t.innerHTML='<div style="position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-family: Sans-Serif;font-size:400%;color:white;">Click to Continue...</div>',t.onclick=function(n){e(),n.preventDefault(),document.body.removeChild(t)},document.body.appendChild(t)}};return a}function r(){return navigator.platform.indexOf("Win")>=0&&(navigator.userAgent.indexOf("Chrome/54")>=0||navigator.userAgent.indexOf("Chrome/55")>=0||navigator.userAgent.indexOf("Chrome/56")>=0)?(console.warn("Chrome <56 in Windows has navigator.bluetooth but it's not implemented properly"),!1):!!navigator.bluetooth||(console.warn("No Web Bluetooth on this platform"),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?console.warn("To use Web Bluetooth on iOS you'll need the WebBLE App"):console.warn("This Web Browser doesn't support Web Bluetooth"),!1)}function c(e,t){a.log&&a.log(e,t)}function s(){if(o.length){var e=o.shift();c(3,"Executing "+JSON.stringify(e)+" from queue"),"eval"==e.type?a.eval(e.expr,e.cb):"write"==e.type?a.write(e.data,e.callback,e.callbackNewline):c(1,"Unknown queue item "+JSON.stringify(e))}}function l(e){if(r()){var n,c,s,l={on:function(e,t){this["on"+e]=t},emit:function(e,t){this["on"+e]&&this["on"+e](t)},isOpen:!1,isOpening:!0,txInProgress:!1},u=void 0,d=[],f=!1;return l.close=function(){l.isOpening=!1,l.isOpen?(l.isOpen=!1,l.emit("close")):e&&e(null),u&&(u.disconnect(),u=void 0,c=void 0,s=void 0)},l.write=function(e,t){e&&d.push({data:e,callback:t,maxLength:e.length}),l.isOpen&&!l.txInProgress&&function e(){var t;if(f)setTimeout(e,50);else if(d.length){var n=d[0];a.writeProgress(n.maxLength-n.data.length,n.maxLength),n.data.length<=244?(t=n.data,n.data=void 0):(t=n.data.substr(0,244),n.data=n.data.substr(244)),l.txInProgress=!0,console.log(2,"Sending "+JSON.stringify(t)),c.writeValue(function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),o=0,i=e.length;o<i;o++)n[o]=e.charCodeAt(o);return t}(t)).then((function(){n.data||(d.shift(),n.callback&&n.callback()),l.txInProgress=!1,e()})).catch((function(e){console.log(1,"SEND ERROR: "+e),d=[],l.close()}))}else a.writeProgress()}()},navigator.bluetooth.requestDevice({filters:[{namePrefix:"K9P Reader"},{services:[i]}],optionalServices:[i]}).then((function(e){return console.log(1,"Device Name:       "+e.name),console.log(1,"Device ID:         "+e.id),e.addEventListener("gattserverdisconnected",(function(){console.log(1,"Disconnected (gattserverdisconnected)"),l.close()})),e.gatt.connect()})).then((function(e){return console.log(1,"Connected"),u=e,e.getPrimaryService(i)})).then((function(e){return console.log(2,"Got service"),(n=e).getCharacteristic("6e400003-b5a3-f393-e0a9-e50e24dcca9e")})).then((function(e){return s=e,console.log(2,"RX characteristic:"+JSON.stringify(s)),s.addEventListener("characteristicvaluechanged",(function(e){var t,n=e.target.value,o=(t=n.buffer,String.fromCharCode.apply(null,new Uint8Array(t)));if(a.flowControl)for(var i=0;i<o.length;i++){var r=o.charCodeAt(i),c=!0;19==r?(console.log(2,"XOFF received => pause upload"),f=!0):17==r?(console.log(2,"XON received => resume upload"),f=!1):c=!1,c&&(o=o.substr(0,i-1)+o.substr(i+1),i--)}console.log(3,"Received "+JSON.stringify(o)),l.emit("data",o),null!==a.data?a.data=a.data.concat(o):a.data=o})),s.startNotifications()})).then((function(){return n.getCharacteristic("6e400002-b5a3-f393-e0a9-e50e24dcca9e")})).then((function(e){c=e,console.log(2,"TX characteristic:"+JSON.stringify(c))})).then((function(){l.txInProgress=!1,l.isOpen=!0,l.isOpening=!1,t=!1,o=[],e(l),l.emit("open"),l.write()})).catch((function(e){console.log(1,"ERROR: "+e),l.close()})),l}}function u(e,i,a){if(r()){if(t)return c(3,"Busy - adding Puck.write to queue"),void o.push({type:"write",data:e,callback:i,callbackNewline:a});var u;if(n&&(n.isOpen||n.isOpening))return n.txInProgress||(n.received=""),t=!0,n.write(e,d);n=l((function(o){if(!o)return n=void 0,void(i&&i(null));n.received="",n.on("data",(function(e){n.received+=e,n.hadData=!0,n.cb&&n.cb(e)})),n.on("close",(function(e){n=void 0})),t=!0,n.write(e,d)}))}function d(){a&&(n.cb=function(e){var o=n.received.indexOf("\n");if(o>=0){var a=n.received.substr(0,o);n.received=n.received.substr(o+1),n.cb=void 0,u&&clearTimeout(u),u=void 0,i&&i(a),t=!1,s()}});var e=300,o=a?100:3,r=o;u=setTimeout((function a(){u=void 0,e&&e--,r&&r--,n.hadData&&(r=o),r&&e?u=setTimeout(a,100):(n.cb=void 0,i&&i(n.received),t=!1,s(),n.received=""),n.hadData=!1}),100)}}},e.exports?e.exports=i():o.Puck=i()}},[[29,1,2]]]);
//# sourceMappingURL=main.f6d90ec1.chunk.js.map